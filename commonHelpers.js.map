{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst searchForm = document.getElementById('search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nconst apiKey = '10909963-d091288ea5fbb5ccebadc5240';\nlet page = 1;\nlet searchQuery = '';\n\nloadMoreBtn.style.display = 'none';\n\nsearchForm.addEventListener('submit', async function (e) {\n  e.preventDefault();\n  page = 1;\n  searchQuery = this.searchQuery.value.trim();\n\n  if (searchQuery === '') {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter a search query.',\n    });\n    return;\n  }\n\n  try {\n    const images = await fetchImages(searchQuery, page);\n    displayImages(images);\n    checkLoadMoreBtnVisibility(images.length);\n  } catch (error) {\n    console.error('Помилка запиту:', error);\n    iziToast.error({\n      title: 'Error',\n      message: 'An error occurred while fetching data. Please try again later.',\n    });\n  }\n});\n\nloadMoreBtn.addEventListener('click', async function () {\n  try {\n    page += 1;\n    const images = await fetchImages(searchQuery, page);\n    displayImages(images);\n    checkLoadMoreBtnVisibility(images.length);\n  } catch (error) {\n    console.error('Помилка запиту:', error);\n    iziToast.error({\n      title: 'Error',\n      message: 'An error occurred while fetching data. Please try again later.',\n    });\n  }\n});\n\nasync function fetchImages(query, page) {\n  const response = await axios.get('https://pixabay.com/api/', {\n    params: {\n      key: apiKey,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 40,\n      page,\n    },\n  });\n\n  if (response.data.hits.length === 0) {\n    iziToast.info({\n      title: 'Info',\n      message: \"Sorry, there are no images matching your search query. Please try again.\",\n    });\n  }\n\n  return response.data.hits;\n}\n\nfunction displayImages(images) {\n  if (page === 1) {\n    gallery.innerHTML = '';\n  }\n\n  images.forEach(image => {\n    const card = document.createElement('div');\n    card.className = 'photo-card';\n\n    const img = document.createElement('img');\n    img.src = image.webformatURL;\n    img.className = 'image';\n    img.alt = image.tags;\n    img.loading = 'lazy';\n\n    const info = document.createElement('div');\n    info.className = 'info';\n\n    const likes = document.createElement('p');\n    likes.className = 'info-item';\n    likes.innerHTML = `<b>Likes:</b> ${image.likes}`;\n\n    const views = document.createElement('p');\n    views.className = 'info-item';\n    views.innerHTML = `<b>Views:</b> ${image.views}`;\n\n    const comments = document.createElement('p');\n    comments.className = 'info-item';\n    comments.innerHTML = `<b>Comments:</b> ${image.comments}`;\n\n    const downloads = document.createElement('p');\n    downloads.className = 'info-item';\n    downloads.innerHTML = `<b>Downloads:</b> ${image.downloads}`;\n\n    info.appendChild(likes);\n    info.appendChild(views);\n    info.appendChild(comments);\n    info.appendChild(downloads);\n\n    card.appendChild(img);\n    card.appendChild(info);\n\n    gallery.appendChild(card);\n  });\n}\n\nfunction checkLoadMoreBtnVisibility(imagesCount) {\n  if (imagesCount < 40) {\n    loadMoreBtn.style.display = 'none';\n    if (imagesCount === 0) {\n      iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n  } else {\n    loadMoreBtn.style.display = 'block';\n  }\n}\n"],"names":["searchForm","gallery","loadMoreBtn","apiKey","page","searchQuery","e","iziToast","images","fetchImages","displayImages","checkLoadMoreBtnVisibility","error","query","response","axios","image","card","img","info","likes","views","comments","downloads","imagesCount"],"mappings":"wvBAIA,MAAMA,EAAa,SAAS,eAAe,aAAa,EAClDC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAc,SAAS,cAAc,YAAY,EAEjDC,EAAS,qCACf,IAAIC,EAAO,EACPC,EAAc,GAElBH,EAAY,MAAM,QAAU,OAE5BF,EAAW,iBAAiB,SAAU,eAAgBM,EAAG,CAKvD,GAJAA,EAAE,eAAc,EAChBF,EAAO,EACPC,EAAc,KAAK,YAAY,MAAM,KAAI,EAErCA,IAAgB,GAAI,CACtBE,EAAS,MAAM,CACb,MAAO,QACP,QAAS,8BACf,CAAK,EACD,MACD,CAED,GAAI,CACF,MAAMC,EAAS,MAAMC,EAAYJ,EAAaD,CAAI,EAClDM,EAAcF,CAAM,EACpBG,EAA2BH,EAAO,MAAM,CACzC,OAAQI,EAAP,CACA,QAAQ,MAAM,kBAAmBA,CAAK,EACtCL,EAAS,MAAM,CACb,MAAO,QACP,QAAS,gEACf,CAAK,CACF,CACH,CAAC,EAEDL,EAAY,iBAAiB,QAAS,gBAAkB,CACtD,GAAI,CACFE,GAAQ,EACR,MAAMI,EAAS,MAAMC,EAAYJ,EAAaD,CAAI,EAClDM,EAAcF,CAAM,EACpBG,EAA2BH,EAAO,MAAM,CACzC,OAAQI,EAAP,CACA,QAAQ,MAAM,kBAAmBA,CAAK,EACtCL,EAAS,MAAM,CACb,MAAO,QACP,QAAS,gEACf,CAAK,CACF,CACH,CAAC,EAED,eAAeE,EAAYI,EAAOT,EAAM,CACtC,MAAMU,EAAW,MAAMC,EAAM,IAAI,2BAA4B,CAC3D,OAAQ,CACN,IAAKZ,EACL,EAAGU,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAAT,CACD,CACL,CAAG,EAED,OAAIU,EAAS,KAAK,KAAK,SAAW,GAChCP,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,0EACf,CAAK,EAGIO,EAAS,KAAK,IACvB,CAEA,SAASJ,EAAcF,EAAQ,CACzBJ,IAAS,IACXH,EAAQ,UAAY,IAGtBO,EAAO,QAAQQ,GAAS,CACtB,MAAMC,EAAO,SAAS,cAAc,KAAK,EACzCA,EAAK,UAAY,aAEjB,MAAMC,EAAM,SAAS,cAAc,KAAK,EACxCA,EAAI,IAAMF,EAAM,aAChBE,EAAI,UAAY,QAChBA,EAAI,IAAMF,EAAM,KAChBE,EAAI,QAAU,OAEd,MAAMC,EAAO,SAAS,cAAc,KAAK,EACzCA,EAAK,UAAY,OAEjB,MAAMC,EAAQ,SAAS,cAAc,GAAG,EACxCA,EAAM,UAAY,YAClBA,EAAM,UAAY,iBAAiBJ,EAAM,QAEzC,MAAMK,EAAQ,SAAS,cAAc,GAAG,EACxCA,EAAM,UAAY,YAClBA,EAAM,UAAY,iBAAiBL,EAAM,QAEzC,MAAMM,EAAW,SAAS,cAAc,GAAG,EAC3CA,EAAS,UAAY,YACrBA,EAAS,UAAY,oBAAoBN,EAAM,WAE/C,MAAMO,EAAY,SAAS,cAAc,GAAG,EAC5CA,EAAU,UAAY,YACtBA,EAAU,UAAY,qBAAqBP,EAAM,YAEjDG,EAAK,YAAYC,CAAK,EACtBD,EAAK,YAAYE,CAAK,EACtBF,EAAK,YAAYG,CAAQ,EACzBH,EAAK,YAAYI,CAAS,EAE1BN,EAAK,YAAYC,CAAG,EACpBD,EAAK,YAAYE,CAAI,EAErBlB,EAAQ,YAAYgB,CAAI,CAC5B,CAAG,CACH,CAEA,SAASN,EAA2Ba,EAAa,CAC3CA,EAAc,IAChBtB,EAAY,MAAM,QAAU,OACxBsB,IAAgB,GAClBjB,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,4DACjB,CAAO,GAGHL,EAAY,MAAM,QAAU,OAEhC"}